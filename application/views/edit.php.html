<?php

  $publicID = $matches[1];
  $test = json_decode(dba_fetch($publicID, $db), true);

?>

<!DOCTYPE html>
<html lang="sv">
  <head>
    <meta charset="utf-8" />
    <title>August</title>
    <link rel="stylesheet" type="text/css" href="styles/edit.css">
  </head>
  <body>
   
    <div id="text">
	 <h2>Ange test titeln:</h2>
	</div>
	<input type="text" name="" value="" id="titel" size="10"/>
	
	<div id="bilder"></div>
	
    <img src="images/addicon.jpg" alt="x" id="x1" height="70%" width="10%">
	
    <script src="https://ajax.googleapis.com/ajax/libs/jquery/1.9.0/jquery.min.js"></script>
    <script src="http://code.jquery.com/ui/1.10.0/jquery-ui.js"></script>
    <script>
 
 	var bilder = [
<?php $i = 1;  foreach ($test["images"] as $image){ ?>
	{file: "http://august.friskola.nu/uploads/<?= $id ?>/<?= $image ?>", id: "bild<?= $i++ ?>"}<?= (count($test["images"]) >= $i ? "," : "") ?>

<? } ?>];

	for (var i=0; i<bilder.length; i++){
	  $('#top').append('<div class="svar" id="svar' +i+ '"></div>');
	}

	function shuffleArray(array) 
    {
      for (var i = array.length - 1; i > 0; i--){
        var j = Math.floor(Math.random() * (i + 1));
        var temp = array[i];
        array[i] = array[j];
        array[j] = temp;
      }
      return array;
    }
  
  
  var blandadeBilder = shuffleArray(bilder);

  for (var i=0; i<blandadeBilder.length; i++){

      $('#top').append('<img src="' +bilder[i].file+ '" id="' +bilder[i].id+'" />');

  }
  
   var bredd =  90/bilder.length;

   $(".svar").css("width", bredd +"%");		
   $("img").css("width", bredd +"%");
   
   $(".svar").css("height", $(".svar").css("width")); //should be the height of the image  

    $(function() {
      $( "img" ).draggable({ snap: ".svar", snapMode: "inner", containment: "#bakgrund"});
      $( ".svar" ).droppable({
        drop: function( event, ui )
	    {
	      answers [this.id]=ui.draggable.attr("id");
	    }
      });
    });
	
   
	
 </script>
  </body>
</html>
